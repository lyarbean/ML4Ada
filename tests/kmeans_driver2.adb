with ML.Clustering.Kmeans;
with Ada.Containers.Vectors;

procedure kmeans_driver2 is
   type My_Dim is (x, y);
   type My_Point is array (My_Dim) of ML.Real;

   type Items_Type is array (Positive range <>) of My_Point;
   data : Items_Type (1 .. 50)
   := ((1.15051216, 0.472122276),
   (1.09239598, 0.636432058),
   (1.63273494, 0.944266883),
   (1.47341322, 0.127732792),
   (1.05773555, 2.737441116),
   (1.86009701, 0.235754348),
   (1.86189074, 2.370561005),
   (1.13529958, 0.359877942),
   (1.29449350, 0.732107572),
   (1.46069898, 0.917935191),
   (1.92692308, 0.728487639),
   (1.04758128, 0.830907185),
   (1.49585697, 0.754649555),
   (0.31762318, 0.089460726),
   (1.84172809, 0.411763131),
   (0.49856196, 0.053693391),
   (0.36886585, 2.309107820),
   (1.65142856, 1.478849825),
   (2.64375353, 2.464321685),
   (0.22912256, 0.859418721),
   (0.29055744, 2.018153195),
   (0.61883246, 1.781105353),
   (0.43476090, 2.497923409),
   (1.65722921, 0.474870022),
   (0.52646230, 0.348672552),
   (2.29263359, 0.780259759),
   (0.41005850, 1.625880654),
   (0.74438341, 0.826952697),
   (1.70730825, 0.001825889),
   (0.37378312, 0.876119264),
   (0.44424768, 1.197617793),
   (2.98833321, 0.710153296),
   (2.47589652, 0.803730348),
   (0.67208442, 1.052753027),
   (0.20884590, 0.448115218),
   (0.98169702, 0.898125705),
   (0.36166799, 0.821921474),
   (0.22665173, 0.960632685),
   (0.78678705, 0.434142612),
   (0.93713365, 0.371491168),
   (0.62550778, 0.186665081),
   (0.68691922, 0.761313227),
   (0.98631066, 0.789352658),
   (0.45111422, 0.559994510),
   (0.24191797, 0.410229031),
   (0.24438946, 0.402182698),
   (0.63817275, 0.491253224),
   (0.32893477, 0.637998218),
   (0.77677226, 0.017112272),
   (0.33214128, 0.328192015)
   );
   --  Functions to access data
   function Length return Natural;
   function Element (x : Positive) return My_Point;

   function Length return Natural is
   begin
      return Natural (data'Last);
   end Length;

   function Element (x : Positive) return My_Point is
   begin
      return data (x);
   end Element;

   package Kmeans is new ML.Clustering.Kmeans
      (My_Dim, My_Point, Length, Element);

   kmeans_obj : Kmeans.Object (3);
begin
   Kmeans.Run (kmeans_obj, 12);
   Kmeans.Run (kmeans_obj, 12);
   Kmeans.Run (kmeans_obj, 12);
   Kmeans.Run (kmeans_obj, 12);
   Kmeans.Put (kmeans_obj);
end kmeans_driver2;
